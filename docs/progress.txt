## Codebase Patterns
- Use `getCurrentUserHouseholdId` from `src/server/household.ts` for household-scoped server logic.

## 2026-01-15 23:59 - US-001
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Added meal CRUD server functions with validation and household scoping.
- Files changed: `src/server/meals.ts`, `src/server/household.ts`, `docs/prds/MEALS_PRD.md`
- **Learnings for future iterations:**
  - Patterns discovered: Meal server functions follow the Tasks pattern with input validators and response mapping.
  - Gotchas encountered: Export the household helper instead of re-creating it in feature server modules.
  - Useful context: Meal responses use ISO date strings for frontend consumption.
---
## 2026-01-16 12:00 - US-002
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Marked household helper reuse story complete; confirmed helper is defined in `src/server/household.ts` and used by meal server functions.
- Files changed: `docs/prds/MEALS_PRD.md`, `docs/progress.txt`
- **Learnings for future iterations:**
  - Patterns discovered: `getCurrentUserHouseholdId` is the shared helper for household scoping across server modules.
  - Gotchas encountered: Ensure PRD stories include a `passes:` line when marking completion.
  - Useful context: Household membership lookup uses `clerkUserId` in `householdMember`.
---